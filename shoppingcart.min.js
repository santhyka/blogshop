function loadProvinsi(a){$("#descity").hide(),$(a).html("loading..."),$.ajax({type:"GET",url:"https://files.themelate.com/process.php?act=showprovince",dataType:"jsonp",success:function(b){$(a).html(""),province="",$.each(b.rajaongkir.results,function(b,c){province='<option value="'+c.province_id+'">'+c.province+"</option>",province+="",$(a).append(province)})},error:function(){$(a).html("ERROR")}})}function loadCity(a,b){$.ajax({type:"GET",url:"https://files.themelate.com/process.php?act=showcity",dataType:"jsonp",data:{province:a},success:function(a){$(b).html(""),city="",$.each(a.rajaongkir.results,function(a,c){city='<option value="'+c.city_id+'">'+c.city_name+"</option>",city+="",$(b).append(city)})},error:function(){$(b).html("ERROR")}})}function cekHarga(){var a=$("#pengiriman").val();if("yes"==a){var b=$("#oricity").val(),c=$("#descity").val(),d=$("#jumlah_berat").html(),e=1;e=0==d?100:1e3*parseFloat(d);var f=$("#ekspedisi").val(),g=$("#typepaket").val();if($("#data-shipping").show(),$("#tableShip").hide(),$("#data-shipping").html("Checking Data.."),$("#ongkir").val("0"),simpleCart.updatePageElements(),"Kota / Kabupaten"!=c){var h=null;h=$.ajax({type:"GET",url:"https://files.themelate.com/process.php?act=cost",dataType:"jsonp",data:{origin:b,destination:c,weight:e,courier:f,paket:g},beforeSend:function(){null!=h&&h.abort()},success:function(a){console.log(a),$("#data-shipping").html("Choose your courier"),$("#resultShip").html(""),ongkir="",$.each(a.data,function(a,b){"allpackage"==g?(ongkir="<tr><td><input type='radio' name='paket' id='servis"+b.paket+"' value='"+b.paket+"|"+b.estimasi+"' onclick='choosePaket("+b.harga+", this.value)'><label for='servis"+b.paket+"'>"+b.paket+"</label></td><td class='tb-desc'><label for='servis"+b.paket+"'>"+b.deskripsi+"</label></td><td><label for='servis"+b.paket+"'>"+b.estimasi+"</label></td><td><label for='servis"+b.paket+"'>"+b.tharga+"</label></td></tr>",$("#resultShip").append(ongkir),$("#tableShip").show()):($("#tableShip").hide(),choosePaket(b.harga,b.paket+"|"+b.estimasi),$("#data-shipping").html("<b>"+f.toUpperCase()+"</b> - "+b.deskripsi),$("#data-shipping").show())}),""==ongkir&&($("#data-shipping").html("<span style='color:#aaa'>Data not found!</span>"),$("#data-shipping").show())},error:function(){$("#data-shipping").html("ERROR")}})}}}function choosePaket(a,b){$("#ongkir").val(a);var e,c=$("#ekspedisi").val(),d=b.split("|");e=""==d[1]?"":" - Estimasi "+d[1]+" hari",$("[name='smanagerekspedisi']").val("<b>"+c.toUpperCase()+"</b> - "+d[0]+e);var f=$("#textprovinsi").val(),g=$("#textkota").val();$("[name='smanagerkekota']").val("<b>"+g+"</b>, "+f),simpleCart.updatePageElements()}function scs(){simpleCart.empty(),$("#pembayaran").show(),$("#pemesanan").hide(),$("#shipping").hide(),$("#mycart").hide()}function opensucces(){var a={};if(document.location.toString().indexOf("?")!==-1)for(var b=document.location.toString().replace(/^.*?\?/,"").replace(/#.*$/,"").split("&"),c=0,d=b.length;c<d;c++){var e=decodeURIComponent(b[c]).split("=");a[e[0]]=e[1]}"do"==a.success?scs():"not"==a.success&&alert("Invoice not send!")}function shopping_cart(a){if("mycart"==a)$("#mycart").show(),$("#shipping").hide(),$("#pemesanan").hide(),$("#pembayaran").hide();else if("shipping"==a){var b=$("#pengiriman").val();if("yes"==b){var c=document.getElementById("jumlah_item");"0"==c.innerHTML?alert("Your cart is empty!"):($("#mycart").hide(),$("#shipping").show(),$("#pemesanan").hide(),$("#pembayaran").hide())}else $("#pemesanan").is(":visible")?($("#mycart").show(),$("#pembayaran").hide(),$("#shipping").hide(),$("#pemesanan").hide()):($("#mycart").hide(),$("#pembayaran").hide(),$("#shipping").hide(),$("#pemesanan").show())}else if("pemesanan"==a){var c=document.getElementById("jumlah_item"),d=document.getElementById("ongkir");if("0"==c.innerHTML)alert("Your cart is empty!");else if("0"==d.value)alert("Please select your courier!");else{var e=document.getElementById("tableCart"),f=document.getElementById("tableTotal"),g=document.getElementById("cart-payment"),h=document.getElementById("cart_total");$("[name='smanagerisicart']").val(e.innerHTML+f.innerHTML),$("[name='smanagerpaymin']").val(g.innerHTML),$("[name='smanagertotal']").val(h.innerHTML),pathArray=window.location.href.split("/"),protocol=pathArray[0],host=pathArray[2],url=protocol+"//"+host,$("[name='smanagerurltoko']").val(url),$("#pemesanan").show(),$("#shipping").hide(),$("#mycart").hide(),$("#pembayaran").hide()}}}$(document).ready(function(){loadProvinsi("#desprovince"),$("#desprovince").change(function(){$("#descity").show(),$("#descity").html("<option>Kota / Kabupaten</option>");var a=$("#desprovince").val();loadCity(a,"#descity")})}),$(document).ready(function(){opensucces(),$("#shopping_cart_form_biasa").submit(function(a){a.preventDefault(),$("#loading-process").show();var b=$("[name='smanagertypemark']").val(),c=$("[name='smanagertypecart']").val(),d=$("[name='smanagertotal']").val(),e=currency,f=cartEmail,g=$("[name='smanagerisicart']").val(),h=$("[name='smanagerongkir']").val(),i=$("[name='smanagerdarikota']").val(),j=$("[name='smanagerkekota']").val(),k=$("[name='smanagerekspedisi']").val(),l=$("[name='smanagerpaymin']").val(),m=$("[name='smanagerlanguage']").val(),n=$("[name='smanagertitel']").val(),o=$("[name='smanagerlogo']").val(),p=$("[name='smanageraddress']").val(),q=$("[name='smanagersurel']").val(),r=$("[name='smanagernami']").val(),s=$("[name='smanagerhenpon']").val(),t=$("[name='smanagergriyo']").val(),u=$("[name='smanagerpostal']").val(),v=$("[name='smanagermsg']").val(),w=$("[name='smanagerurl']").val();$.ajax({url:"https://files.themelate.com/blogshop/checkout2.php?from=ajax",type:"POST",data:{smanagertypemark:b,smanagertypecart:c,smanagertotal:d,smanageremail:f,smanagercurrency:e,smanagerisicart:g,smanagerongkir:h,smanagerdarikota:i,smanagerkekota:j,smanagerekspedisi:k,smanagerpaymin:l,smanagerlanguage:m,smanagertitel:n,smanagerlogo:o,smanageraddress:p,smanagersurel:q,smanagernami:r,smanagerhenpon:s,smanagergriyo:t,smanagerpostal:u,smanagermsg:v,smanagerurl:w},success:function(a,b){$("#loading-process").hide(),response=a.split("|"),'"1'==response[0]?scs():alert(response[1])},error:function(a){console.log(a)}})})});
